<div class='form-group file_field'>
  <%= f.label :image,"日本酒の画像" %>
  <%= f.file_field :image, id: 'sake_img' %>
</div>

<div id="img_area"></div>

<div class='form-group'>
  <%= f.label :meigara, '銘柄' %>
  <%= f.text_field :meigara, class: 'form-control' %>
</div>
  
<div class='form-group'>
  <%= f.label :seimai_buai, '精米歩合' %><br>
  <%= f.collection_select :seimai_buai, Seimaibuai.all, :name, :name, {}, {class: 'form-control'} %>
</div>
  
<div class='form-group'>
  <%= f.label :locaility, '産地' %>
  <%= f.collection_select :locaility, Prefecture.all, :name, :name, {}, {class: 'form-control'} %>
</div>
  
<div class='form-group'>
  <%= f.label :alcohol_degree, 'アルコール度数' %>
  <%= f.number_field :alcohol_degree, step: "0.1", class: 'form-control' %>
</div>
  
<div class='form-group'>
  <%= f.label :sake_meter_value, '日本酒度' %>
  <%= f.number_field :sake_meter_value, step: "0.1", class: 'form-control' %>
</div>
  
<div class='form-group'>
  <%= f.label :acidity, '酸度' %>
  <%= f.number_field :acidity, step: "0.1", class: 'form-control' %>
</div>

<% if current_user.id == 1 %>
<div class='form-group'>
  <%= f.label :rakutenlink, "リンク名", class: 'text-white' %>
  <%= f.text_field :rakutenlink, :placeholder => "楽天リンクを入力", class: 'form-control'%>
</div>
<% end %>

<script>
document.getElementById('sake_img').addEventListener('change', function() {
  let img = document.getElementById('img_area');
  if(img != null){
    while(img.firstChild){
      img.removeChild(img.firstChild);
    }
  }
  let fileList = this.files;
  
  for(let i=fileList.length; 0<i; i--){
    let blobUrl = window.URL.createObjectURL(fileList[i-1])
    img.insertAdjacentHTML('afterbegin', '<img id="img" height="150px" width="150px" src="' + blobUrl + '" >')
  }
  });
</script>